{% extends 'main/navbar_footer.html' %}
{% block title %}Plan List Page{% endblock  %}
{% block content %}

<link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet" />
<script src="http://cdn.tailwindcss.com"></script>
{% if messages %}
    {% for message in messages %}
    <script>alert('{{ message }}');</script>
    {% endfor %}
{% endif %}
<body>
  <div class="w-full p-4 mx-auto space-y-6 text-center bg-white border border-gray-200 rounded-lg shadow sm:p-6 md:p-8 dark:bg-gray-800 dark:border-gray-700">
    <h1 class="text-xl font-extrabold text-gray-900 uppercase dark:text-white">Production Plan List</h1>
    <div>
      <form method="get">
        <div class="flex pb-4">
          <select id="column" name="column" class="px-5 py-2.5 text-sm text-gray-900 border border-gray-300 rounded-lg ps-10 w-80 bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" required>
            <option value="" selected>Choose a column</option>
            <option value="name">Plan Name</option>
            <option value="length">Month</option>
          </select>
          <label for="search" class="sr-only">Search</label>
          <div class="relative mx-4">
              <div class="absolute inset-y-0 flex items-center pointer-events-none rtl:inset-r-0 start-0 ps-3">
                  <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                      <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"/>
                  </svg>
              </div>
              <input type="text" id="search" name="search" class="block px-5 py-2.5 text-sm text-gray-900 border border-gray-300 rounded-lg ps-10 w-80 bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Search for items" required>
          </div>
          <button type="submit" class=" text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Search</button>
        </div>
      </form>
      <table class="w-full text-sm text-center text-gray-500 rtl:text-right dark:text-gray-300">
        {% if page_obj %}
        <thead class="text-xs font-semibold text-black uppercase bg-gray-50 dark:bg-gray-700 dark:text-white">
          <tr>
            <td scope="col" class="px-6 py-3">Plan Name</td>
            <td scope="col" class="px-6 py-3">Months</td>
            <td scope="col" class="px-6 py-3">Action</td>
          </tr>
        </thead>
        {% endif %}
        <tbody>
          {% for list in page_obj %}
          {% if forloop.last %}
          <tr class="border-b odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 dark:border-gray-700">
          {% else %}
          <tr class="border-b odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 dark:border-gray-700">
          {% endif %}
            <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">{{list.name}}</th>
            <td class="px-6 py-4">{{ list.length }}</td>
            <td class="px-6 py-4">
              <div class="grid grid-cols-3 gap-1">
                <div class="flex items-center justify-center rounded">
                  <a href={% url 'input_plan_variables' list.id %} class="content-center w-full h-full p-2 m-1 text-sm font-medium text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Change Plan Input Variables</a>
                </div>
                <div class="flex items-center justify-center rounded">
                  {% if list.filled %}
                  <a data-tooltip-placement="bottom" href={% url 'initiate_plan_optimize' list.id %} class="content-center w-full h-full p-2 m-1 text-sm font-medium text-white bg-green-700 rounded-lg hover:bg-green-800 focus:ring-4 focus:ring-green-300 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800">Start Plan Optimization</a><br><br>                  
                  {% else %}
                  <button data-tooltip-target="tooltip-default" data-tooltip-placement="bottom" class="content-center w-full h-full p-2 m-1 text-sm font-medium text-white bg-gray-900 rounded-lg cursor-not-allowed dark:bg-gray-700" disabled>Start Plan Optimization</button><br><br>                  
                  <div id="tooltip-default" role="tooltip" class="absolute z-10 invisible inline-block px-3 py-2 text-sm font-medium text-white transition-opacity duration-300 bg-gray-700 rounded-lg shadow-sm opacity-0 tooltip dark:bg-white dark:text-black">
                    You must change plan optimization variables first!
                    <div class="tooltip-arrow" data-popper-arrow>
                    </div>
                  </div>
                  {% endif %}
                </div>
                <div class="flex items-center justify-center rounded">
                  <a href={% url 'delete_plan' list.id %} onclick="return confirm('Are you sure you want to delete plan {{ list.name }}?')"  class="content-center w-full h-full p-2 m-1 text-sm font-medium text-white bg-red-700 rounded-lg hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800">Delete Plan Record</a>
                </div>
              </div>
            </td>
          </tr> 
          {% empty %}
          <tr class="bg-white dark:bg-gray-800">
            <td colspan="3" class="px-4 py-4">
              <div class="flex flex-wrap justify-center">
                <h1 class="block w-full text-xl font-extrabold text-gray-900 uppercase dark:text-white">No Plans Made Yet!</h1>
                <a href={% url 'home' %} class="content-center p-2 m-1 text-white bg-[#3b5998] hover:bg-[#3b5998]/90 focus:ring-4 focus:outline-none focus:ring-[#3b5998]/50 font-medium rounded-lg text-sm dark:focus:ring-[#3b5998]/55">Create a New Production Plan</a>
              </div>
            </td>
          </tr>
          {% endfor %}
        </tbody>
        <!--end of table-->
      </table>
      <nav class="flex flex-wrap items-center justify-between pt-4 flex-column md:flex-row" aria-label="Table navigation">
        <span class="block w-full mb-4 text-sm font-normal text-gray-500 dark:text-gray-400 md:mb-0 md:inline md:w-auto">Showing <span class="font-semibold text-gray-900 dark:text-white">{{ page_obj.start_index }} - {{ page_obj.end_index }}</span> of <span class="font-semibold text-gray-900 dark:text-white">{{ page_obj.paginator.count }}</span></span>
        <ul class="inline-flex h-10 -space-x-px text-sm rtl:space-x-reverse">
          {% if page_obj.has_previous %}
              <li>
                <a href="?page=1" class="flex items-center justify-center h-10 px-3 leading-tight text-gray-500 bg-white border border-gray-300 ms-0 rounded-s-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white">First</a>
              </li>
              <li>
                <a href="?page={{ page_obj.previous_page_number }}" class="flex items-center justify-center h-10 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white">Previous</a>
              </li>
          {% endif %}
          <li>
            <a href="#" class="flex items-center justify-center h-10 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white {% if not page_obj.has_previous %}rounded-s-lg{% endif %}{% if not page_obj.has_next %}rounded-e-lg{% endif %}">{{page_obj.number}} of {{page_obj.paginator.num_pages}}</a>
          </li>
          {% if page_obj.has_next %}
              <li>
                <a href="?page={{ page_obj.next_page_number }}" class="flex items-center justify-center h-10 px-3 leading-tight text-gray-500 bg-white border border-gray-300 ms-0 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white">Next</a>
              </li>
              <li>
                <a href="?page={{ page_obj.paginator.num_pages }}" class="flex items-center justify-center h-10 px-3 leading-tight text-gray-500 bg-white border border-gray-300 rounded-e-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white">Last</a>
              </li>
          {% endif%}
        </ul>
      </nav>
    </div>
  </div>
</body>
{% endblock  %} 